–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Ñ–∞–π–ª src/telegram_bot.py. –ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É 582 —Å –º–µ—Ç–æ–¥–æ–º portfolio_command –∏ –¥–æ–±–∞–≤—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ analytics_command —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–µ–≥–æ (–ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –º–µ—Ç–æ–¥–æ–º):

    async def analytics_command(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /analytics."""
        loading_msg = await update.message.reply_text(
            "üìä –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—é –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è...\n"
            "üî¢ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏ —Ä–∏—Å–∫–∏...\n"
            "üìà –í—ã—á–∏—Å–ª—è—é Sharpe ratio –∏ VaR...",
            parse_mode=ParseMode.MARKDOWN
        )
        
        try:
            # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Portfolio Analytics
            from portfolio_analytics import PortfolioAnalytics
            
            analytics = PortfolioAnalytics(self.portfolio_manager)
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞
            days = 30
            if context.args and context.args[0].isdigit():
                days = min(90, max(7, int(context.args[0])))
            
            # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏
            metrics = await analytics.calculate_portfolio_metrics(days=days)
            
            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è Telegram
            result_text = analytics.format_metrics_for_telegram(metrics)
            
            await loading_msg.edit_text(
                result_text,
                parse_mode=ParseMode.MARKDOWN
            )
            
            logger.info(f"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞: {metrics.positions_count} –ø–æ–∑–∏—Ü–∏–π, "
                       f"Sharpe {metrics.sharpe_ratio:.2f}")
            
        except Exception as e:
            error_msg = "‚ùå *–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è*\n\n"
            error_msg += f"–ü—Ä–∏—á–∏–Ω–∞: {str(e)}\n\n"
            error_msg += "üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:\n"
            error_msg += "‚Ä¢ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ\n"
            error_msg += "‚Ä¢ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥\n"
            error_msg += "‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å /portfolio –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∑–∏—Ü–∏–π"
            
            await loading_msg.edit_text(
                error_msg,
                parse_mode=ParseMode.MARKDOWN
            )
            logger.error(f"Analytics command error: {e}")