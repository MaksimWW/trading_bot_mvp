–í —Ñ–∞–π–ª–µ src/telegram_bot.py –¥–æ–±–∞–≤—å –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É /analysis –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

1. –î–æ–±–∞–≤—å –∏–º–ø–æ—Ä—Ç –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞:
from technical_analysis import get_technical_analyzer

2. –î–æ–±–∞–≤—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ –∫–ª–∞—Å—Å TradingTelegramBot:

async def analysis_command(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /analysis TICKER."""
    if not context.args:
        await update.message.reply_text(
            "üìä *–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∞–∫—Ü–∏–∏*\n\n"
            "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: `/analysis TICKER`\n\n"
            "–ü—Ä–∏–º–µ—Ä—ã:\n"
            "‚Ä¢ `/analysis SBER` - –∞–Ω–∞–ª–∏–∑ –°–±–µ—Ä–±–∞–Ω–∫–∞\n"
            "‚Ä¢ `/analysis GAZP` - –∞–Ω–∞–ª–∏–∑ –ì–∞–∑–ø—Ä–æ–º–∞\n"
            "‚Ä¢ `/analysis YNDX` - –∞–Ω–∞–ª–∏–∑ –Ø–Ω–¥–µ–∫—Å–∞\n\n"
            "üìà –í–∫–ª—é—á–∞–µ—Ç: RSI, MACD, —Å–∫–æ–ª—å–∑—è—â–∏–µ —Å—Ä–µ–¥–Ω–∏–µ, –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä\n"
            "‚è±Ô∏è –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: 3-8 —Å–µ–∫—É–Ω–¥",
            parse_mode=ParseMode.MARKDOWN
        )
        return

    ticker = context.args[0].upper()
    
    loading_msg = await update.message.reply_text(
        f"üìä –í—ã–ø–æ–ª–Ω—è—é —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ *{ticker}*...\n"
        f"üìà –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—é RSI, MACD, —Å–∫–æ–ª—å–∑—è—â–∏–µ —Å—Ä–µ–¥–Ω–∏–µ...",
        parse_mode=ParseMode.MARKDOWN
    )
    
    try:
        from technical_analysis import get_ticker_analysis_for_telegram
        result_text = await get_ticker_analysis_for_telegram(ticker)
        
        await loading_msg.edit_text(
            result_text,
            parse_mode=ParseMode.MARKDOWN
        )
        
        logger.info(f"–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ {ticker} –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ")
        
    except Exception as e:
        error_msg = f"‚ùå *–û—à–∏–±–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ {ticker}*\n\n"
        error_msg += f"–ü—Ä–∏—á–∏–Ω–∞: {str(e)}\n\n"
        error_msg += f"üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:\n"
        error_msg += f"‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–∫–µ—Ä (SBER, GAZP, YNDX)\n"
        error_msg += f"‚Ä¢ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥\n"
        error_msg += f"‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å /status –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º"
        
        await loading_msg.edit_text(
            error_msg,
            parse_mode=ParseMode.MARKDOWN
        )
        logger.error(f"Analysis command error for {ticker}: {e}")

3. –í –º–µ—Ç–æ–¥–µ setup_handlers –¥–æ–±–∞–≤—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥—ã:
app.add_handler(CommandHandler("analysis", self.analysis_command))

4. –í –º–µ—Ç–æ–¥–µ help_command –¥–æ–±–∞–≤—å –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã –≤ —Ä–∞–∑–¥–µ–ª –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
- `/analysis TICKER` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∞–∫—Ü–∏–∏

5. –í –º–µ—Ç–æ–¥–µ setup_bot_commands –¥–æ–±–∞–≤—å –∫–æ–º–∞–Ω–¥—É –≤ –º–µ–Ω—é:
BotCommand("analysis", "üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∞–∫—Ü–∏–∏"),